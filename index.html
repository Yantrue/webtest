<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard Presentasi Video</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f7f7f7; }
    .input-container { max-width: 600px; margin-bottom: 30px; }
    input, textarea, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 1rem;
    }
    .video-card {
      background: #fff;
      padding: 15px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      position: relative;
    }
    .video-card img { width: 100%; max-width: 300px; }
    .hapus-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #e74c3c;
      border: none;
      color: white;
      padding: 6px 10px;
      font-weight: bold;
      cursor: pointer;
      border-radius: 3px;
    }
    .hapus-btn:hover {
      background: #c0392b;
    }
  </style>
</head>
<body>

  <h1>üìö Dashboard Presentasi Video</h1>

  <div class="input-container">
    <input type="text" id="judul-presentasi" placeholder="Judul Halaman Presentasi" />
    <input type="text" id="youtube-link" placeholder="Link Video YouTube" />
    <textarea id="video-desc" placeholder="Deskripsi Video"></textarea>
    <button onclick="tambahVideo()">‚ûï Tambahkan Presentasi</button>
  </div>

  <h2>üìã Daftar Presentasi:</h2>
  <div id="video-list"></div>

  <script>
    function getVideoId(url) {
      const match = url.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/))([\w-]{11})/);
      return match ? match[1] : null;
    }

    let daftarVideo = JSON.parse(localStorage.getItem("daftar_presentasi")) || [];

    async function tambahVideo() {
      const judul = document.getElementById("judul-presentasi").value.trim();
      const link = document.getElementById("youtube-link").value.trim();
      const deskripsi = document.getElementById("video-desc").value.trim();
      const videoId = getVideoId(link);

      if (!judul || !videoId) {
        alert("Judul dan link video harus diisi dengan benar.");
        return;
      }

      try {
        const res = await fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${videoId}`);
        const data = await res.json();

        if (!data.title) throw new Error("Data video tidak ditemukan");

        const videoBaru = {
          id: videoId,
          judulHalaman: judul,
          title: data.title,
          channel: data.author_name,
          thumbnail: data.thumbnail_url,
          deskripsi
        };

        daftarVideo.push(videoBaru);
        localStorage.setItem("daftar_presentasi", JSON.stringify(daftarVideo));

        document.getElementById("judul-presentasi").value = "";
        document.getElementById("youtube-link").value = "";
        document.getElementById("video-desc").value = "";
        renderDaftar();

      } catch (error) {
        alert("Gagal mengambil data video, coba lagi.");
      }
    }

    function hapusVideo(id) {
      if (!confirm("Yakin ingin menghapus presentasi ini?")) return;
      daftarVideo = daftarVideo.filter(v => v.id !== id);
      localStorage.setItem("daftar_presentasi", JSON.stringify(daftarVideo));
      renderDaftar();
    }

    function renderDaftar() {
      const container = document.getElementById("video-list");
      container.innerHTML = "";

      if (daftarVideo.length === 0) {
        container.innerHTML = "<p>Belum ada presentasi yang ditambahkan.</p>";
        return;
      }

      daftarVideo.forEach(video => {
        const div = document.createElement("div");
        div.className = "video-card";
        div.innerHTML = `
          <button class="hapus-btn" onclick="hapusVideo('${video.id}')">‚úñ</button>
          <h3>${video.judulHalaman}</h3>
          <a href="video.html?v=${video.id}">
            <img src="${video.thumbnail}" alt="thumbnail" />
            <br />
            <strong>${video.title}</strong><br />
            <em>Dari: ${video.channel}</em>
          </a>
          <p>${video.deskripsi}</p>
          <p>‚û°Ô∏è Klik untuk buka halaman video</p>
        `;
        container.appendChild(div);
      });
    }

    renderDaftar();
  </script>

</body>
</html>
